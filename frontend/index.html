<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æµ®ç”Ÿåæ¢¦</title>
    <link rel="stylesheet" href="index.css" />
    <!-- Add Marked.js library for Markdown rendering -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- Add pako for Gzip decompression -->
    <script src="https://cdn.jsdelivr.net/npm/pako@2.1.0/dist/pako.min.js"></script>

    <script type="text/javascript">
      (function (c, l, a, r, i, t, y) {
        c[a] =
          c[a] ||
          function () {
            (c[a].q = c[a].q || []).push(arguments);
          };
        t = l.createElement(r);
        t.async = 1;
        t.src = "https://www.clarity.ms/tag/" + i;
        y = l.getElementsByTagName(r)[0];
        y.parentNode.insertBefore(t, y);
      })(window, document, "clarity", "script", "t8hrcju0wy");
    </script>
  </head>

  <body>
    <div id="app-container">
      <!-- Login View -->
      <div id="login-view" class="view active">
        <h1>æµ®ç”Ÿåæ¢¦</h1>
        <p>æ­¤ä¹ƒè¯•ç‚¼ä¹‹åœ°ï¼Œè¯·å…ˆè¡¨æ˜èº«ä»½ã€‚</p>
        <form id="login-form" class="login-form">
          <div class="form-group">
            <label for="username">ç”¨æˆ·å:</label>
            <input type="text" id="username" name="username" required />
          </div>
          <div class="form-group">
            <label for="password">å¯†ç :</label>
            <input type="password" id="password" name="password" required />
          </div>
          <button type="submit" class="login-button">ç™»å½•</button>
        </form>
        <p id="login-error" class="error-message"></p>
      </div>

      <!-- Game View -->
      <div id="game-view" class="view">
        <header id="game-header">
          <div class="header-left">
            <button
              id="status-toggle"
              class="toggle-button"
              title="æ”¶èµ·/å±•å¼€çŠ¶æ€æ "
            >
              ğŸ“œ
            </button>
            <h1>æµ®ç”Ÿä¸€æ¢¦</h1>
          </div>
          <div id="game-status">
            <span>å‰©ä½™æœºç¼˜: <span id="opportunities">10</span></span>
            <button
              id="status-float"
              class="toggle-button"
              title="æµ®åŠ¨/åœé çŠ¶æ€æ "
            >
              ğŸ“Œ
            </button>
            <button id="logout-button" class="logout-button">ç™»å‡º</button>
          </div>
        </header>

        <aside id="status-panel">
          <!-- Character status will be rendered here -->
          <p>ã€äººç‰©ä¸šåŠ›ã€‘</p>
          <div id="character-status"></div>
        </aside>

        <main id="main-content">
          <div id="narrative-window">
            <!-- Game narrative will be appended here -->
          </div>
        </main>

        <footer id="action-area">
          <div class="action-input-row">
            <input
              type="text"
              id="action-input"
              placeholder="æ±æ¬²ä½•ä¸º..."
              disabled
            />
            <button id="action-button" disabled>å®š</button>
          </div>
          <div class="action-buttons">
            <button id="start-trial-button" class="hidden">
              å¼€å¯ä¸‹ä¸€æ¬¡è¯•ç‚¼
            </button>
            <button id="refresh-attempts-button" class="hidden">
              é‡æ–°å¼€å§‹ä»Šæ—¥è¯•ç‚¼
            </button>
          </div>
        </footer>
      </div>

      <!-- Loading Spinner -->
      <div id="loading-spinner" class="spinner-overlay" style="display: none">
        <div class="spinner"></div>
      </div>

      <!-- Roll Animation Overlay -->
      <div id="roll-overlay" class="hidden">
        <div id="roll-panel">
          <div class="dice-cup">ğŸ²</div>
          <div id="roll-details">
            <span id="roll-type"></span>
            <span id="roll-target"></span>
          </div>
          <div id="roll-result-display" class="hidden">
            <span id="roll-outcome"></span>
            <span id="roll-value"></span>
          </div>
        </div>
      </div>
    </div>
    <script type="module" src="index.js"></script>
  </body>
</html>
